<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="animate.css">
    <title>View Students</title>
</head>
<style>
 *{
  margin:0;
  padding:0;
  font-family: 'Roboto', sans-serif;
 }
 :root {
  --button-background: dodgerblue;
  --button-color: white;
  
  --dropdown-highlight: dodgerblue;
  --dropdown-width: 160px;
  --dropdown-background: #333;
  --dropdown-color: #333;
}
  header{
    display:flex;
    justify-content:space-between;
    align-items: center;
    padding:12px 4%;
    background-color:#333;
    height: 50px;
    font-size: larger;
  }
  header li, header a{
    font-family:'Robot';
    font-weight:500;
    font-size:18px;
    color:#edf0f1;
    text-decoration:none;
  }
  header .logo a{
    cursor:pointer;
  }
  .nav_links{
    list-style:none;
  }
  .nav_links li{
    display:inline-block;
    padding:0px 15px;
  }
  .nav-links li a{
    transition:all 0.3s ease 0s;
  }
  li a:hover{
   background-color: #009688;
  }
  li a.active{
    background-color: #009688;
  }
  

  a.button {
    /* Frame */
    display: inline-block;
    padding: 10px 15px;
    border-radius: 50px;
    box-sizing: border-box;
    
    /* Style */
    border: none;
    background: var(--button-background);
    color: var(--button-color);
    font-size: 18px;
    cursor: pointer;
  }
  
  a.button:active {
    filter: brightness(75%);

  }
  
  /* Dropdown styles */
  .dropdown {
    position: relative;
    padding: 0;
    margin-right: 1em;
    
    border: none;
  }
  
  .dropdown summary {
    list-style: none;
    list-style-type: none;
  }
  
  .dropdown > summary::-webkit-details-marker {
    display: none;
  }
  
  .dropdown summary:focus {
    outline: none;
  }
  
  .dropdown summary:focus a.button {
    border: 2px solid white;
  }
  
  .dropdown summary:focus {
    outline: none;
  }
  
  .dropdown ul {
    position: absolute;
    margin: 20px 0 0 0;
    padding: 10px 0;
    width: var(--dropdown-width);
    left: 50%;
    margin-left: calc((var(--dropdown-width) / 2)  * -1);
    box-sizing: border-box;
    z-index: 2;
    
    background: var(--dropdown-background);
    border-radius: 6px;
    list-style: none;
  }
  
  .dropdown ul li {
    padding: 0;
    margin: 0;
  }
  
  .dropdown ul li a:link, .dropdown ul li a:visited {
    display: inline-block;
    padding: 10px 0.8rem;
    width: 100%;
    box-sizing: border-box;
    
    color: var(--dropdown-color);
    text-decoration: none;
    color:#fff;
  }
  
  .dropdown ul li a:hover {
    background-color: var(--dropdown-highlight);
    color: var(--dropdown-background);
  }
  
  /* Dropdown triangle */
  .dropdown ul::before {
    content: ' ';
    position: absolute;
    width: 0;
    height: 0;
    top: -10px;
    left: 50%;
    margin-left: -10px;
    border-style: solid;
    border-width: 0 10px 10px 10px;
    border-color: transparent transparent var(--dropdown-background) transparent;
  }
  
  
  /* Close the dropdown with outside clicks */
  .dropdown > summary::before {
    display: none;
  }
  
  .dropdown[open] > summary::before {
      content: ' ';
      display: block;
      position: fixed;
      top: 0;
      right: 0;
      left: 0;
      bottom: 0;
      z-index: 1;
  }
  .sales-boxes{
    margin-top:50px;
  }
  .sales-boxes .input-search{
    width:300px;
    padding:10px 5px;
    margin-bottom:5px;
    border:1px solid #ccc;
  }
  table{
    border-collapse:collapse;
    border-radius:5px 5px 0px 0px;
    font-family:'Robot';
    width:700px;
    margin:auto;

  }
  table a{
    text-decoration: none;
  }
  table thead tr{
    background-color:#009688;
    color:#fff;
    text-align:left;
    font-weight:bold;
  }
  table th, table td{
    padding:12px 15px;
  }
  table tbody tr{
    border:1px solid #fff;
  }
  table tbody tr:nth-of-type(even){
    background-color:#fff;
  }
  table tbody tr:nth-of-type(odd){
    background-color:#fff;
  }
  table tbody tr:last-of-type{
    border-bottom:2px solid #009879;
  }
  table .button1 {
      padding:10px 10px;
      
      
      background-color:#333;
      color:#fff;
      border:none;
      cursor:pointer;
      display:block;
  }
  .update{
    padding:10px 15px;
      background-color:#333;
      color:#fff;
      border:none;
      cursor:pointer;
  }
  .hello{
    display:flex;
    text-align:center;
    width:700px;
    margin:auto;
  }
  .active{
    padding:10px 15px;
                        background-color:#05705b;
                        color:#fff;
                        border:none;
                        cursor:pointer;
  }
  .inactive{
    padding:10px 15px;
                        background-color:#8d0510;
                        color:#fff;
                        border:none;
                        cursor:pointer;
  }
  .assign{
    padding:10px 15px;
                        background-color:#333;
                        color:#fff;
                        border:none;
                        cursor:pointer;
  }
  .collection-item{
    text-align:center;
    width:100%;
  }
  footer{
    position:absolute;
    bottom:0;
    text-align:center;
    width:100%;
    background-color:#333;
    color:#fff;
    padding:10px 0;
  }
  body{
    background-color: rgb(252, 249, 249);
  }
</style>
<body>
  <header>
    <h2 class="logo"><a href="#">Student Affair</a></h2>
    <nav>
      <ul class="nav_links">
      <li><a href="Home.html">Home</a></li>
			<li><a href="Add-student.html">Add Student</a></li>
			<li><a href="Search.html">Search and Update</a></li>
			<li><a href="View-all-active-inactive-students.html">View Students</a></li>
      <li id ="chan" ><a href="login.html">Login</a></li>
    </ul>
    </nav>
  </header>
  <div id="alert" style="text-align:center;display:none;color: #3c763d;background-color: #dff0d8; border-color: #d6e9c6;padding: 15px; margin-bottom: 20px; border: 1px solid transparent; border-radius: 4px;">
    <a id="trigger" href="#" style=" text-decoration: none; float: right; font-size: 21px; font-weight: 700; line-height: 1; color: #000; text-shadow: 0 1px 0 #fff; filter: alpha(opacity=20); opacity: .2;" data-dismiss="alert" aria-label="close">&times;</a>
    <strong>Successfully!</strong> Deleted User.
</div>
    <div class="sales-boxes">
        <div class="recent-sales box">

          <table class="styled-table animate__animated animate__fadeInUp">
            <div class="hello ">
              <div class="search-box animate__animated animate__fadeInLeft" >    
                <input type="text" id="filterInput" class="input-search" placeholder="Enter Student Name">
              </div>              
            </div>
              <thead>
                  <tr style="text-align:center">
                      <th>Id</th>
                      <th>Name</th>
                      <th>Depart</th>
                      <th>Activity</th>
                      <th>Assign</th>
                      <th>Delete</th>
                      
                  </tr>
              </thead>
              <tbody id="ul">
                  <tr class="collection-item">
                      <td class="data-id">1</td>
                      <td>Yousef</td>
                      <td>IS</td>
                      <td><a href="#" style="padding:10px 15px;
                        background-color:#00f736;
                        color:#fff;
                        border:none;
                        cursor:pointer;"value="active" onclick="chan('1')" id="1">active</a></td>
                      <td class="button1"><button id="1" type="submit">Delete</button></td>
                  </tr>

                  <tr class="collection-item">
                    <td class="data-id">2</td>
                    <td>Yousef</td>
                    <td>IS</td>
                    <td><a href="#" style="padding:10px 15px;
                      background-color:#00f736;
                      color:#fff;
                      border:none;
                      cursor:pointer;" value="active" onclick="chan('2')" id="2">active</a></td>
                    <td class="button1"><button id="2" type="submit">Delete</button></td>
                </tr>
                  <tr class="collection-item">
                      <td class="data-id">3</td>
                      <td>Anas</td>
                      <td>IS</td>
                      <td><a href="#" style="padding:10px 15px;
                        background-color:#00f736;
                        color:#fff;
                        border:none;
                        cursor:pointer;" value="active" onclick="chan('3')" id="3" onclick =>active</a></td>
                        <script>
                          function chechlogin(){
                            var x = document.getElementById("3").value;
                            if(x == "active"){
                              document.getElementById("3").value = "inactive";
                              document.getElementById("3").innerHTML = "inactive";
                              document.getElementById("3").style.backgroundColor = "#f70015";
                            }
                            else{
                              document.getElementById("3").value = "active";
                              document.getElementById("3").innerHTML = "active";
                              document.getElementById("3").style.backgroundColor = "#00f736";
                            }
                          }
                        </script>
                      <td class="button1"><button id="3" type="submit" >Delete</button></td>
                  </tr>
                  <tr class="collection-item">
                      <td class="data-id">4</td>
                      <td>Cool</td>
                      <td>IS</td>
                      <td><a href="#" style="padding:10px 15px;
                        background-color:#00f736;
                        color:#fff;
                        border:none;
                        cursor:pointer;" value="active" onclick="chan('4')" id="4">active</a></td>
                      <td class="button1"><button id="4" type="submit" >Delete</button></td>
                  </tr>
              </tbody>
          </table>
        </div>
    </div>
    </div>
    <footer>
      <p>Student Affairs website &copy; 2023</p>
    </footer>
    <script>
      /* ------- ATTTENTION!!!! ------ UNCOMMENT THIS LINE */
       let arrayofTasks = [];

       /* ------- ATTTENTION!!!! ------ COMMENT THIS  BELOW !!!*/
       //let arrayofTasks = [{id:'1',name:'Yousef',depart:'IS',activity:1},{id:'2',name:'Yousef',depart:'IS',activity:1},{id:'3',name:'Anas',depart:'IS',activity:1},{id:'4',name:'Cool',depart:'IS',activity:1}];
        let table = document.getElementById('ul');
        //console.log(JSON.stringify(arrayofTasks))
        getDataFromLocalStorage();
        
        //addDataToLocalStorageFrom(arrayofTasks) /* ------- ATTTENTION!!!! ------ COMMENT THIS */
        function addDataToLocalStorageFrom(arrayofTasks){
          window.localStorage.setItem('items',JSON.stringify(arrayofTasks));
        }
        /* --- Attention --- */
        function getDataFromLocalStorage(){
          let data = window.localStorage.getItem('items');
          if(data){
            let tasks = JSON.parse(data);
            arrayofTasks = tasks;
          }
        }
        /* --- Attention --- */
        function addElementToPageFrom(arrayofTasks){
          table.innerHTML = "";
          arrayofTasks.filter((task)=>{
            let tr = document.createElement("tr");
            tr.className = 'collection-item';
            let id = document.createElement("td");
            id.className = "data-id";
            id.appendChild(document.createTextNode(task.id));
            tr.appendChild(id);
            let name = document.createElement("td");
            name.appendChild(document.createTextNode(task.name));
            tr.appendChild(name);
            let depart = document.createElement("td");
            depart.appendChild(document.createTextNode(task.depart));
            tr.appendChild(depart);
            let active = document.createElement("td");
            let actan = document.createElement("a");
            actan.setAttribute("value","active");
            
            if(task.activity == 1){
              actan.appendChild(document.createTextNode("active"));
              actan.className = 'active';
            }else{
              actan.appendChild(document.createTextNode("inactive"));
              actan.className = 'inactive';
            }
            active.appendChild(actan);
            tr.appendChild(active);
            let assign = document.createElement("td");
            let Asanc = document.createElement('a');
            Asanc.className = 'assign';
            Asanc.setAttribute("href","Assign_a_department.html");
            Asanc.appendChild(document.createTextNode("Assign"));
            assign.appendChild(Asanc);
            tr.appendChild(assign);
            let del = document.createElement("td");
            del.appendChild(document.createTextNode('Delete'));
            del.className = "button1";
            tr.appendChild(del);
            table.appendChild(tr);

          }) 
        }
        addElementToPageFrom(arrayofTasks);
        
        let filterInput = document.getElementById('filterInput');

        filterInput.addEventListener('keyup',filterNames);
        function filterNames(){
          let filterValue = document.getElementById('filterInput').value.toUpperCase();
          

          let ul = document.getElementById('ul');
          let li  = ul.querySelectorAll('tr.collection-item');
          for(let i = 0; i <li.length;i++){
            
            let a = li[i].getElementsByTagName('td')[1];
            let b = li[i].getElementsByTagName('td')[3].firstChild.innerHTML.toLowerCase();
            
            if(a.innerHTML.toUpperCase().indexOf(filterValue) > -1){
                    if(b == "active")
                  {
                    li[i].style.display = '';
                  }else  if(filterInput.value == ''){
                    li[i].style.display = '';
                  }else{
                    li[i].style.display = 'none';
                  }
                    
            }else{
              li[i].style.display = 'none';
            }
            
            if(filterInput.value == ''){
                li[i].style.display = '';
            }
          }
        }
        /* ------- ATTTENTION!!!! ------ */
        let itemdiv = document.getElementById('ul');
        itemdiv.addEventListener('click',(e)=>{

          if(e.target.classList.contains("button1")){

            deletetasks(e.target.parentElement.querySelector('.data-id').innerHTML);
            e.target.parentElement.remove();
            document.getElementById('alert').style.display = 'block';
               setTimeout(()=>{
                document.getElementById('alert').style.display = 'none';
               },1000)
          }

        });
        /* ------- ATTTENTION!!!! ------  */
        let actin = document.getElementById('ul');
        actin.addEventListener('click',(e)=>{
         
          if(e.target.classList.contains("active")){
            
            e.target.parentElement.firstChild.innerHTML = "Inactive";
            e.target.parentElement.firstChild.className = 'inactive';
            triggeract(e.target.parentElement.parentElement.querySelector('.data-id').innerHTML);
          
          }else if(e.target.classList.contains("inactive")){
            e.target.parentElement.firstChild.innerHTML = "active";
            e.target.parentElement.firstChild.className = 'active';
            triggeract(e.target.parentElement.parentElement.querySelector('.data-id').innerHTML);
          }
          
        });
        /* ------ Update -------*/
        let upda = document.getElementById('ul');
        upda.addEventListener('click',(e)=>{
         
          if(e.target.classList.contains("update")){
            console.log(e.target.parentElement.parentElement.querySelector('.data-id').innerHTML);
              localStorage.setItem('data-id',e.target.parentElement.parentElement.querySelector('.data-id').innerHTML);
          
          }
          
        });
        let assign = document.getElementById('ul');
        assign.addEventListener('click',(e)=>{
         
          if(e.target.classList.contains("assign")){
            console.log(e.target.parentElement.parentElement.querySelector('.data-id').innerHTML);
              localStorage.setItem('data-id',e.target.parentElement.parentElement.querySelector('.data-id').innerHTML);
          
          }
          
        });
        /* ------- ATTTENTION!!!! ------ */
        function triggeract(id){
          let data = window.localStorage.getItem('items');
          if(data){
            let tasks = JSON.parse(data);
            arrayofTasks = tasks;
          }
          for(let i = 0; i <arrayofTasks.length;i++){
            if(arrayofTasks[i].id == id){
              if(arrayofTasks[i].activity == 1){
                arrayofTasks[i].activity = 0
              }else{
                arrayofTasks[i].activity = 1;
              }
              
            }
            
          }
          addDataToLocalStorageFrom(arrayofTasks);
        }
        /* ------- ATTTENTION!!!! ------  */
        function deletetasks(id){
          arrayofTasks = arrayofTasks.filter((task)=>task.id != id);
          addDataToLocalStorageFrom(arrayofTasks);
        }

      </script>
</body>

</html>
<script>
  var islogin = localStorage.getItem("islogin");
if (islogin=="true"){
  var chan = document.getElementById("chan");
  var logout = document.createElement("Button");
  logout.style.display
  document.getElementById("chan").innerHTML = "<a id ='press' onclick='Change()' >Log Out</a>";
}
else{
  document.getElementById("chan").innerHTML = "<a href='login.html'>Login</a>";
}
function Change(){
  localStorage.setItem("islogin", "false");
  window.location.href = "Home.html";
}
</script>